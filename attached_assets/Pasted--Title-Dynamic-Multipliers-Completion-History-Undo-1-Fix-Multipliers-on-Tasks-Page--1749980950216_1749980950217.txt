**Title: Dynamic Multipliers + Completion History & Undo**

## 1. Fix Multipliers on Tasks Page
- **Data Source**: Use pre-aggregated weekly stats from `GET /api/progress` (see previous spec).  
- **Columns**:
  - **This Week**: show `completions Ã— â†’ totalPoints` (actual earned points).  
  - **Next Add**: show `+ basePoints Ã— currentMultiplier â†’ nextPoints` (using the smoothed curve â‰¤1.5Ã—).  
- **Implementation**:
  ```jsx
  const stats = weeklyById[task.id] || { completions: 0, totalPoints: 0, currentMultiplier: 1 };
  <td>{stats.completions}Ã— â†’ <strong>{stats.totalPoints} pts</strong></td>
  <td>+{task.basePoints} Ã— {stats.currentMultiplier.toFixed(1)} â†’ 
      <strong>{(task.basePoints * stats.currentMultiplier).toFixed(1)} pts</strong>
  </td>
2. Add â€œCompletion Historyâ€ View
Where: Under the Progress tab (or as a collapsible panel on Tasks page).

Endpoint: GET /api/completions?weekStart=&weekEnd=&userId= returns:

ts
Copy
Edit
interface Completion {
  id: string;
  taskId: string;
  taskName: string;
  timestamp: string;
  notes?: string;
  pointsEarned: number;     // base Ã— multiplier at that moment
}
UI: A table with columns:

Task Name	Date & Time	Points Earned	Notes	Actions
Gym/Recovery/PT	Jun 12 11:05 AM	5 pts	â€œFelt strongâ€	ğŸ—‘ï¸ Delete
Coding Practice	Jun 11 02:30 PM	4 pts	(blank)	ğŸ—‘ï¸ Delete

Actions:

Delete: calls DELETE /api/completions/:id, then:

Updates the history table.

Refetches /api/progress to recompute your multipliers and totals.

Edit Notes: inline â€œâœâ€ icon that opens a small modal to PATCH /api/completions/:id with new notes.

3. Acceptance Criteria
Tasks Page shows correct â€œThis Weekâ€ and â€œNext Addâ€ based on real multipliers.

Progress tab includes a â€œCompletion Historyâ€ table listing every log for the selected week.

You can delete any mistaken log and see the totals + multipliers update immediately.

You can add or edit a note on each completion.

All APIs and UI follow existing authentication & pagination conventions.

Drop this into Replit so they can implement both the dynamic scoring fixes and give you a permanent, editable ledger of everything youâ€™ve logged.








